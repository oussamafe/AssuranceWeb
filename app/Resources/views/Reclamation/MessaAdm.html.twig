{% extends 'baseAdmin.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('back/assets/vendors/custom/datatables/datatables.bundle.css') }}" rel="stylesheet"
          type="text/css"/>

{% endblock %}
{% block content %}
    <link rel="stylesheet" href="{{ asset('css/design.css') }}">
    <script src="{{ asset ('jquery/jquery-3.3.1.js') }}"></script>
    <section id="intro1" class="clearfix">
    </section>

    <div class="list">

        <table class="table table-striped- table-bordered table-hover table-checkable" id="idRR">
            <thead>
            <tr>
                <th scope="id" style="display: none;">id</th>
                <th>Messagerie</th>
            </tr>
            </thead>
            <tbody>
            {% for p in disc %}
                <tr>
                    <td style="display: none;">{{ p.id }}</td>
                    <td>{{ p.username }}</td>

                </tr>
            {% endfor %}
            </tbody>
        </table>


    </div>
    <div class="message" id="message">

        <input type="text" id="mg"> <br>
        <input type="submit" id="send" value="envoyer">
    </div>


    {% set count=0 %}
    {% for pi in disc1 %}
        {% set count=count+1  %}
    {% endfor %}
    <label id="label3" nu="{{ count }}"></label>


    <script>

            $(function () {


                $("#idRR tbody tr").click( function () {
                    var tableData = $(this).children("td").map(
                        function () {
                            return $(this).text();
                        }
                    ).get();
                    var td=tableData[0];

                    $.ajax(
                        {
                            type: 'POST',
                            url: '{{ absolute_url(asset('')) }}app_dev.php/admin/Disc',
                            data: {td:td},
                            success:function(response ) {
                                $("#message").html(response)

                            }
                        }
                    )
               } );


            })
            var label = $('#label3');
            var n = label.attr('nu');


















        </script>




{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('back/assets/vendors/custom/datatables/datatables.bundle.js') }}"
            type="text/javascript"></script>
    <script>
        $(document).ready(function () {
            $('#kt_table_2').DataTable();
        });
    </script>
{% endblock %}